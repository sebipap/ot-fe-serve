(this["webpackJsonpopenticket-frontend"]=this["webpackJsonpopenticket-frontend"]||[]).push([[0],{80:function(e,t,c){},85:function(e,t,c){},87:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c(24),a=c.n(s),r=c(8),i=c(7),j=c(0),l=function(){return Object(j.jsxs)("div",{className:"next-steps",children:[Object(j.jsx)("h2",{className:"my-5 text-center",children:"How do I do it?"}),Object(j.jsxs)("div",{className:"row",children:[Object(j.jsxs)("div",{className:"col-md-5 mb-4",children:[Object(j.jsx)("h6",{className:"mb-3",children:Object(j.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://auth0.com/docs/connections",children:"Manage tickets for a cinema, theater or a concert."})}),Object(j.jsx)("p",{children:"Lorem ipsum"})]}),Object(j.jsx)("div",{className:"col-md"}),Object(j.jsxs)("div",{className:"col-md-5 mb-4",children:[Object(j.jsx)("h6",{className:"mb-3",children:Object(j.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://auth0.com/docs/multifactor-authentication",children:"Enable Multi-Factor Authentication"})}),Object(j.jsx)("p",{children:"Add an extra layer of security by enabling Multi-factor Authentication, requiring your users to provide more than one piece of identifying information. Push notifications, authenticator apps, SMS, and DUO Security are supported."})]})]}),Object(j.jsxs)("div",{className:"row",children:[Object(j.jsxs)("div",{className:"col-md-5 mb-4",children:[Object(j.jsx)("h6",{className:"mb-3",children:Object(j.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://auth0.com/docs/anomaly-detection",children:"Anomaly Detection"})}),Object(j.jsx)("p",{children:"Auth0 can detect anomalies and stop malicious attempts to access your application. Anomaly detection can alert you and your users of suspicious activity, as well as block further login attempts."})]}),Object(j.jsx)("div",{className:"col-md"}),Object(j.jsxs)("div",{className:"col-md-5 mb-4",children:[Object(j.jsx)("h6",{className:"mb-3",children:Object(j.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://auth0.com/docs/rules",children:"Learn About Rules"})}),Object(j.jsx)("p",{children:"Rules are JavaScript functions that execute when a user authenticates to your application. They run once the authentication process is complete, and you can use them to customize and extend Auth0's capabilities."})]})]})]})},o=function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-3",children:Object(j.jsx)("h1",{className:"display-3",children:"Open Ticket"})}),Object(j.jsx)("div",{className:"col-9",children:Object(j.jsx)("img",{className:"mb-4 app-logo",src:"https://notion-emojis.s3-us-west-2.amazonaws.com/v0/svg-twitter/1f39f-fe0f.svg",alt:"React logo",width:"120"})})]}),Object(j.jsxs)("p",{className:"lead",children:["Create events, sell tickets, manage bookings and create boarding passes"," "]})]})},b=c(92),d=function(){return Object(j.jsx)(b.a,{as:"p",animation:"glow",className:"m-auto",children:Object(j.jsx)(b.a,{xs:12})})},O=c(20),h=[{route:"/",name:"Home",key:"Home"},{route:"/events",name:"Events",key:"Events"},{route:"/profile",name:"Account",key:"Account"}],u=function(){return Object(j.jsx)("ul",{className:"nav nav-pills",children:h.map((function(e){return Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(O.b,{to:e.route,exact:!0,className:"btn transparent",activeClassName:"btn blue ",children:e.name})},e.key)}))})},m=function(){return Object(j.jsx)("div",{className:"nav-container mb-5  mt-5",children:Object(j.jsx)("nav",{className:"navbar navbar-expand-md ",children:Object(j.jsx)("div",{className:"container",children:Object(j.jsx)(u,{})})})})},x=function(){return Object(j.jsxs)("div",{className:"pt-4 my-md-5 pt-md-5 border-top p-3 bg-light",children:[Object(j.jsx)("h4",{children:"OpenTicket app "}),Object(j.jsxs)("h6",{children:["By ",Object(j.jsx)("a",{href:"https://sebipap.github.io/",children:"Sebasti\xe1n Papanicolau"})]})]})},p=function(){return Object(j.jsxs)(n.Fragment,{children:[Object(j.jsx)(o,{}),Object(j.jsx)("hr",{}),Object(j.jsx)(l,{})]})},f=c(3),v=c(56),g=function(){var e=Object(i.b)().loginWithRedirect;return Object(j.jsx)(v.a,{onClick:function(){return e()},children:"Log In"})},N=function(){var e=Object(i.b)().logout;return Object(j.jsx)(v.a,{onClick:function(){return e({returnTo:window.location.origin})},children:"Log Out"})},y=function(){return Object(i.b)().isAuthenticated?Object(j.jsx)(N,{}):Object(j.jsx)(g,{})},w=c(93),k=function(){var e=Object(i.b)().user,t=e.name,c=e.picture,s=e.email,a=Object(n.useState)(""),l=Object(f.a)(a,2),o=l[0],b=l[1];return o?Object(j.jsx)(r.Redirect,{to:o}):Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"container mb-5",children:[Object(j.jsx)("h1",{className:"mb-4",children:"Profile"}),Object(j.jsx)(y,{})]}),Object(j.jsx)("hr",{}),Object(j.jsxs)("div",{className:"row align-items-center profile-header",children:[Object(j.jsx)("div",{className:"col-md-2 mb-3",children:Object(j.jsx)("img",{src:c,alt:"Profile",className:"rounded-circle img-fluid profile-picture mb-3 mb-md-0"})}),Object(j.jsxs)("div",{className:"col-md text-center text-md-left",children:[Object(j.jsx)("h2",{children:t}),Object(j.jsx)("p",{className:"lead text-muted",children:s})]})]}),Object(j.jsx)(w.a,{onClick:function(){return b("/my-tickets")},className:"m-1 floating-card",children:Object(j.jsx)(w.a.Body,{children:Object(j.jsx)("h3",{children:"My Tickets"})})}),Object(j.jsx)(w.a,{onClick:function(){return b("/my-events")},className:"m-1 floating-card",children:Object(j.jsx)(w.a.Body,{children:Object(j.jsx)("h3",{children:"My Events"})})})]})},S=c(13),T=c.n(S),R=c(22);function E(e,t,c){return fetch("https://sebipap.github.io/openticket.github.io//api/"+e,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}}).catch((function(e){return console.error(e)}))}var L="https://sebipap.github.io/openticket.github.io/";function A(e){return fetch(L+"/api/"+e).then((function(e){return e.json()}))}function C(e,t){return fetch(L+"/api/"+e,{method:"POST",headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.error(e)}))}var F=function(){var e=Object(n.useState)("aa"),t=Object(f.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)(""),r=Object(f.a)(a,2),l=r[0],o=r[1],b=Object(n.useState)([]),d=Object(f.a)(b,2),O=d[0],h=d[1],u=Object(i.b)().getAccessTokenSilently,m=function(){var e=Object(R.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:t=e.sent,E("messages/create-message",{message:l},t).then((function(e){return s(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)("input",{type:"text",className:"input",value:l,onChange:function(e){return o(e.target.value)}}),Object(j.jsx)("button",{type:"button",className:"btn btn-primary",onClick:m,children:"Send"}),Object(j.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){A("messages/get-messages").then((function(e){return h(e)}))},children:"Get Messages"}),c&&Object(j.jsxs)("div",{className:"mt-5",children:[Object(j.jsx)("h6",{className:"muted",children:"Result"}),Object(j.jsx)("div",{className:"container-fluid",children:Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("code",{className:"col-12 text-light bg-dark p-4",children:JSON.stringify(c)})})}),Object(j.jsx)("h6",{className:"muted",children:"Mensajes"}),Object(j.jsx)("div",{className:"container-fluid",children:Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("code",{className:"col-12 text-light bg-dark p-4",children:O.map((function(e){return Object(j.jsx)("h4",{children:e.msg})}))})})})]})]})},D=function(e){var t=e.event,c=t._id,n=t.name,s=t.description,a=t.location,r=t.imgURL;return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(O.b,{to:"/event/".concat(c),exact:!0,className:"floating-card card col-sm-7",children:[Object(j.jsx)("img",{className:"card-img-top",src:r,alt:"Event IMG"}),Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("h4",{className:"card-title",children:n}),Object(j.jsxs)("div",{children:[Object(j.jsx)("p",{className:"card-text",children:s}),Object(j.jsx)("p",{className:"card-text",children:a})]})," "]})]})})},U=function(e){var t=e.msg;return Object(j.jsx)("div",{classNameName:"alert alert-warning alert-dismissible fade show",role:"alert",children:Object(j.jsx)("strong",{children:JSON.stringify(t)})})},B=function(){var e=Object(n.useState)([]),t=Object(f.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)(""),r=Object(f.a)(a,2),i=r[0],l=r[1],o=Object(n.useState)(!0),b=Object(f.a)(o,2),O=b[0],h=b[1];return Object(n.useEffect)((function(){A("events/all").then((function(e){s(e.map((function(e){return Object(j.jsx)(D,{event:e},e._id)}))),h(!1)})).catch((function(e){return l(" "+e)}))}),[]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"container mb-5",children:Object(j.jsx)("h1",{className:"mb-4",children:"Events"})}),Object(j.jsx)("hr",{}),Object(j.jsx)("div",{className:"container",children:i?Object(j.jsx)(U,{msg:i}):c}),O?Object(j.jsx)(d,{}):c]})},I=c(90),H=c(44),M=function(e){var t=e.eventObj,c=e.dateObj,s=Object(n.useState)(!1),a=Object(f.a)(s,2),r=a[0],l=a[1],o=Object(n.useState)(""),b=Object(f.a)(o,2),d=b[0],O=b[1],h=Object(n.useState)(null),u=Object(f.a)(h,2),m=u[0],x=u[1],p=Object(i.b)().user,g=c.date,N=c.time,y=c.price,w=c.capacity,k=c.occupied,S=t.name,L=t.location,A=Object(i.b)().getAccessTokenSilently,C=c._id,F=function(){var e=Object(R.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("la id es ".concat(C)),e.next=3,A();case 3:t=e.sent,E("events/ticket/create-ticket",{dateID:C,ownerName:p.name,ownerEmail:p.email},t).then((function(e){return e.json()})).then((function(e){O(e.msg+""),x(e.id)}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"card",children:Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsxs)("div",{className:"row",children:[Object(j.jsxs)("div",{className:"col-md",children:[Object(j.jsx)("h5",{className:"card-title",children:"".concat(g," at ").concat(N)}),Object(j.jsx)("small",{className:"text-muted",children:"Capacity: ".concat(w-k," of ").concat(w," (").concat(100/(w/k),"%) ")})," "]}),Object(j.jsx)("div",{className:"col-sm",children:Object(j.jsx)("h5",{children:"$".concat(y)})}),Object(j.jsx)("div",{className:"col-sm",children:Object(j.jsx)(v.a,{onClick:function(){return l(!0)},children:"Buy Ticket"})})]}),Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"progress",style:{height:"2px"},children:Object(j.jsx)("div",{className:"progress-bar",role:"progressbar",style:{width:100/(w/k)+"%"}})})})]})}),m?Object(j.jsx)(H.Redirect,{to:"/ticket/".concat(m)}):Object(j.jsx)(j.Fragment,{children:" "}),Object(j.jsxs)(I.a,{show:r,onHide:function(){return l(!1)},placement:"end",children:[Object(j.jsx)(I.a.Header,{closeButton:!0,children:Object(j.jsx)(I.a.Title,{children:"Buy Ticket"})}),Object(j.jsxs)(I.a.Body,{children:[Object(j.jsx)("h4",{children:"Event Details"}),Object(j.jsx)("table",{className:"table",children:Object(j.jsxs)("tbody",{children:[Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"Event"}),Object(j.jsx)("td",{children:S})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"Location"}),Object(j.jsx)("td",{children:L})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"Date"}),Object(j.jsx)("td",{children:g})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"Time"}),Object(j.jsx)("td",{children:N})]})]})}),Object(j.jsx)("hr",{}),Object(j.jsx)("h4",{children:"Your Details"}),Object(j.jsx)("table",{className:"table",children:Object(j.jsxs)("tbody",{children:[Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"Name"}),Object(j.jsx)("td",{children:p.name})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"Email"}),Object(j.jsx)("td",{children:p.email})]})]})}),Object(j.jsx)("hr",{}),Object(j.jsx)("h4",{children:"Checkout "}),Object(j.jsx)("table",{className:"table",children:Object(j.jsxs)("tbody",{children:[Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"Ticket Price"}),Object(j.jsx)("td",{children:"$ ".concat(y)})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"Discount (-100%)"}),Object(j.jsx)("td",{children:"$-".concat(y,"  ")})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"Tax (21%)"}),Object(j.jsx)("td",{children:"$ 0"})]})]})}),Object(j.jsx)("hr",{}),Object(j.jsx)("h5",{children:"Total:  $".concat(y-y)}),Object(j.jsxs)("div",{className:"col m-1",children:[Object(j.jsx)(v.a,{className:"green",onClick:function(){return F(C)},children:"Pay Total"}),d]})]})]})]})},P=function(e){var t=e.id,c=e.description,s=e.location,a=e.imgURL,r=Object(n.useState)([]),i=Object(f.a)(r,2),l=i[0],o=i[1],b=Object(n.useState)(null),O=Object(f.a)(b,2),h=O[0],u=O[1],m=Object(n.useState)(!0),x=Object(f.a)(m,2),p=x[0],v=x[1];Object(n.useEffect)((function(){A("events/".concat(t,"/dates")).then((function(e){o(e),v(!1)})).catch((function(e){return u(" "+e)}))}),[]);var g=l.map((function(e){return Object(j.jsx)(M,{dateObj:e,eventObj:{id:t,description:c,location:s,imgURL:a}},e._id)}));return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{children:[h,Object(j.jsx)("div",{className:"card m-3 shadow",children:Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("img",{src:a,className:"img-fluid mb-4",alt:""}),Object(j.jsx)("h5",{children:"Location: ".concat(s)}),Object(j.jsx)("p",{children:" ".concat(c)})]})}),Object(j.jsx)("div",{className:"card m-3 shadow",children:Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("h3",{className:"m-3",children:" Dates "}),p?Object(j.jsx)(d,{}):Object(j.jsx)(j.Fragment,{children:g})]})})]})})},_=c(35),J=c(91),$=function(){return Object(j.jsx)(v.a,{type:"submit",children:"Submit"})},q=function(e){var t=e.status,c=e.msg;return Object(j.jsxs)(J.a,{variant:t?"success":"danger",className:"m-3",children:[t?"Success: ".concat(c):"Error: ".concat(c)," "]})},z=function(e){var t=e.formTitle,c=e.initialValues,s=e.url,a=e.children,l=e.redirectURL,o=Object(n.useState)(null),b=Object(f.a)(o,2),O=b[0],h=b[1],u=Object(n.useState)(0),m=Object(f.a)(u,2),x=m[0],p=m[1],g=Object(n.useState)(!1),N=Object(f.a)(g,2),y=N[0],w=N[1],k=Object(n.useState)(null),S=Object(f.a)(k,2),L=S[0],A=S[1],C=Object(n.useState)(!1),F=Object(f.a)(C,2),D=F[0],U=F[1],B=Object(i.b)().getAccessTokenSilently;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(v.a,{className:"gray",onClick:function(){return U(!0)},children:t}),Object(j.jsxs)(I.a,{show:D,onHide:function(){return U(!1)},children:[Object(j.jsx)(I.a.Header,{closeButton:!0,children:Object(j.jsxs)(I.a.Title,{children:[" ",t]})}),Object(j.jsxs)(I.a.Body,{children:[Object(j.jsx)(_.d,{initialValues:c,onSubmit:function(){var e=Object(R.a)(T.a.mark((function e(t,c){var n,a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=c.setSubmitting)(!0),e.next=4,B();case 4:a=e.sent,E(s,t,a).then((function(e){return p(e.ok),e.json()})).then((function(e){h(e.msg),A(e.id)})).then((function(){n(!1),w(!0)}));case 6:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;return Object(j.jsxs)(_.c,{className:"container",children:[a,t?Object(j.jsx)(d,{}):Object(j.jsx)($,{})]})}}),y?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(q,{status:x,msg:O}),l?Object(j.jsx)(r.Redirect,{to:l(L)}):null]}):null]})]})]})},V=function(e){var t=e.name,c=e.title,n=e.optional,s=e.type,a=e.textarea;return Object(j.jsxs)("div",{className:"col",children:[Object(j.jsx)(_.a,{name:t,component:"div"}),Object(j.jsxs)("div",{class:"form-floating mb-3",children:[Object(j.jsx)(_.b,{required:!n,type:s,class:"form-control",id:t,placeholder:c,name:t,as:a?"textarea":"input"}),Object(j.jsx)("label",{for:"floatingInput",children:c})]})]})},Y=function(e){var t=e.children;return Object(j.jsx)("div",{className:"row gy-2 gx-3 align-items-center",children:t})},Q=function(e){var t=e.id;return Object(j.jsxs)(z,{initialValues:{date:"",time:"",price:0,capacity:0},formTitle:"New Date",url:"events/".concat(t,"/new-date"),children:[Object(j.jsxs)(Y,{children:[Object(j.jsx)(V,{type:"date",name:"date",title:"Date"}),Object(j.jsx)(V,{type:"time",name:"time",title:"Time"})]}),Object(j.jsxs)(Y,{children:[Object(j.jsx)(V,{type:"number",name:"price",title:"Price"}),Object(j.jsx)(V,{type:"number",name:"capacity",title:"Capacity"})]})]})},G=function(e){var t=e.match.params.id,c=Object(n.useState)({}),s=Object(f.a)(c,2),a=s[0],r=s[1],l=Object(n.useState)(!0),o=Object(f.a)(l,2),b=o[0],O=o[1],h=Object(n.useState)(""),u=Object(f.a)(h,2),m=u[0],x=u[1],p=a.name,v=a.description,g=a.location,N=a.imgURL,y=a.creator,w=Object(i.b)().user,k=a.creator===w.sub;return Object(n.useEffect)((function(){A("events/id/".concat(t)).then((function(e){r(e),O(!1)})).catch((function(e){return x(" "+e)}))})),m||(b?Object(j.jsx)(d,{}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"container mb-5",children:[Object(j.jsx)("h1",{className:"mb-4 placeholder-glow",children:p}),Object(j.jsxs)("h4",{className:"placeholder-glow",children:[g," "]})]}),Object(j.jsx)("hr",{}),Object(j.jsx)(P,{imgURL:N,description:v,creator:y,id:t,location:g,name:p}),k?Object(j.jsx)(Q,{id:t}):Object(j.jsx)(j.Fragment,{})]}))},W=c(2),K=c(4),X=["component"],Z=function(e){var t=e.component,c=Object(K.a)(e,X);return Object(j.jsx)(r.Route,Object(W.a)({component:Object(i.c)(t,{onRedirecting:function(){return Object(j.jsx)(d,{})}})},c))},ee=(c(80),function(e){var t=e.name,c=e.location,s=e.date,a=e.time,r=e.price,i=e.ownerEmail,l=e.ownerName,o=e.ticketID;Object(n.useEffect)((function(){fetch("https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=".concat(o)).then((function(e){return e.blob()})).then((function(e){u(URL.createObjectURL(e))}))}),[]);var b=Object(n.useState)(null),O=Object(f.a)(b,2),h=O[0],u=O[1];return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{className:"p-3 card m-2",children:[Object(j.jsx)("div",{className:"row pb-3",children:Object(j.jsx)("h2",{children:t})}),Object(j.jsxs)("div",{className:"row",children:[Object(j.jsxs)("div",{className:"col-sm",children:[Object(j.jsx)("h3",{children:c}),Object(j.jsx)("hr",{}),Object(j.jsx)("h4",{children:s}),Object(j.jsx)("h5",{children:"at ".concat(a)})]}),Object(j.jsxs)("div",{className:"col-md",children:[Object(j.jsx)("h4",{children:"$".concat(r)}),Object(j.jsx)("hr",{}),Object(j.jsx)("h5",{children:i}),Object(j.jsx)("h5",{children:l})]}),Object(j.jsx)("div",{className:"col-sm p-3",children:h?Object(j.jsx)("a",{href:h,className:"card-floating",children:Object(j.jsx)("img",{src:h,alt:o,className:"border p-3",style:{width:"100%"}})}):Object(j.jsxs)("div",{className:"border p-3",children:[Object(j.jsx)("h5",{children:"Loading QR..."}),Object(j.jsx)(d,{})," "]})})]})]})})}),te=function(e){var t=e.match.params.id,c=Object(n.useState)({}),s=Object(f.a)(c,2),a=s[0],r=s[1],i=Object(n.useState)(""),l=Object(f.a)(i,2),o=l[0],b=l[1],O=Object(n.useState)(!0),h=Object(f.a)(O,2),u=h[0],m=h[1],x=a.date,p=a.time,v=a.price,g=a.name,N=a.location,y=a.ownerName,w=a.ownerEmail;return Object(n.useEffect)((function(){A("events/ticket/".concat(e.match.params.id)).then((function(e){r(e),m(!1),b(e.err)})).catch((function(e){console.log(e)}))})),o||(u?Object(j.jsx)(d,{}):Object(j.jsx)(ee,{name:g,location:N,date:x,time:p,price:v,ownerEmail:w,ownerName:y,ticketID:t}))},ce=function(e){var t=e.name,c=e.location,n=e.date,s=e.time;return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("div",{className:"row pb-3",children:Object(j.jsx)("h2",{children:t})}),Object(j.jsx)("div",{className:"row",children:Object(j.jsxs)("div",{className:"col-sm",children:[Object(j.jsx)("h3",{children:c}),Object(j.jsx)("hr",{}),Object(j.jsx)("h4",{children:n}),Object(j.jsx)("h5",{children:"at ".concat(s)})]})})]})})},ne=function(){var e=Object(i.b)().getAccessTokenSilently,t=Object(n.useState)([]),c=Object(f.a)(t,2),s=c[0],a=c[1],r=Object(n.useState)(!0),l=Object(f.a)(r,2),o=l[0],b=l[1],O=Object(n.useState)(null),h=Object(f.a)(O,2),u=h[0],m=h[1];return Object(n.useEffect)((function(){function t(){return(t=Object(R.a)(T.a.mark((function t(){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:C("events/ticket/user",t.sent).then((function(e){a(e),b(!1)}));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),Object(j.jsxs)(j.Fragment,{children:[u?Object(j.jsx)(H.Redirect,{to:u}):null,Object(j.jsx)("div",{className:"container mb-5",children:Object(j.jsx)("h1",{className:"mb-4",children:"My Tickets"})}),Object(j.jsx)("hr",{}),o?Object(j.jsx)(d,{}):s?s.map((function(e){return Object(j.jsx)("div",{className:"m-3 floating-card card",onClick:function(){return m("/ticket/".concat(e.ticketID))},children:Object(j.jsx)(ce,Object(W.a)({},e))})})):Object(j.jsx)(J.a,{children:"You don't have any tickets"})]})},se=function(){return Object(j.jsxs)(z,{initialValues:{eventName:"",description:"",location:"",imgURL:""},formTitle:"Create a new event",url:"events/create-new",redirectURL:function(e){return"/event/".concat(e)},children:[Object(j.jsx)(V,{name:"eventName",type:"text",title:"Name"}),Object(j.jsx)(V,{name:"description",type:"text",title:"Description",textarea:!0}),Object(j.jsx)(V,{name:"location",type:"text",title:"Location",optional:!0}),Object(j.jsx)(V,{name:"imgURL",type:"text",title:"URL of Image"})]})},ae=function(e){var t=e.msg;return Object(j.jsx)("div",{classNameName:"alert alert-warning alert-dismissible fade show",role:"alert",children:Object(j.jsx)("strong",{children:JSON.stringify(t)})})},re=function(){var e=Object(n.useState)([]),t=Object(f.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)(""),r=Object(f.a)(a,2),l=r[0],o=r[1],b=Object(n.useState)(!0),O=Object(f.a)(b,2),h=O[0],u=O[1],m=Object(i.b)().getAccessTokenSilently;return Object(n.useEffect)((function(){function e(){return(e=Object(R.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:C("events/user-events",e.sent).then((function(e){s(e.map((function(e){return Object(j.jsx)(D,{event:e},e._id)}))),u(!1)})).catch((function(e){return o(" "+e)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"container mb-5",children:[Object(j.jsx)("h1",{className:"mb-4",children:"My Events"}),Object(j.jsx)(se,{})]}),Object(j.jsx)("hr",{}),Object(j.jsx)("div",{className:"container",children:l?Object(j.jsx)(ae,{msg:l}):c}),h?Object(j.jsx)(d,{}):c]})},ie=c(61),je=c.n(ie),le=function(e){var t=e.ownerName,c=e.date,n=e.time,s=e.name,a=e.location,r=e.ownerEmail;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h3",{children:t}),Object(j.jsx)("h5",{children:"".concat(c," @ ").concat(n)}),Object(j.jsx)("p",{children:"".concat(s," in ").concat(a)}),Object(j.jsx)("p",{children:"Email: ".concat(r)})]})},oe=function(){var e=Object(n.useState)(""),t=Object(f.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)(null),r=Object(f.a)(a,2),i=r[0],l=r[1],o=Object(n.useState)(!1),b=Object(f.a)(o,2),O=b[0],h=b[1],u=Object(n.useState)(!1),m=Object(f.a)(u,2),x=m[0],p=m[1];return Object(n.useEffect)((function(){p(!0),A("events/ticket/".concat(c)).then((function(e){e.name?l(e):l(null),p(!1)})).catch((function(e){console.log(e)}))}),[c]),Object(j.jsxs)("div",{children:[Object(j.jsx)(je.a,{delay:300,onError:function(e){console.error(e)},onScan:function(e){e&&(h(!0),s(e))},style:{width:"100%"}}),Object(j.jsxs)(I.a,{show:O,onHide:function(){return h(!1)},placement:"end",children:[Object(j.jsx)(I.a.Header,{closeButton:!0}),Object(j.jsx)(I.a.Body,{children:x?Object(j.jsx)(d,{}):i?Object(j.jsx)(le,Object(W.a)({},i)):Object(j.jsx)(J.a,{variant:"danger",children:" Invalid Ticket "})})]})]})},be=function(){return Object(i.b)().isLoading?Object(j.jsx)(d,{}):Object(j.jsxs)("div",{id:"app",className:"d-flex flex-column h-100",children:[Object(j.jsx)(m,{}),Object(j.jsx)("div",{className:"container flex-grow-1",children:Object(j.jsxs)(r.Switch,{children:[Object(j.jsx)(r.Route,{path:"/",exact:!0,component:p}),Object(j.jsx)(Z,{path:"/profile",component:k}),Object(j.jsx)(Z,{path:"/events",component:B}),Object(j.jsx)(Z,{path:"/test",component:F}),Object(j.jsx)(r.Route,{path:"/event/:id",component:G}),Object(j.jsx)(r.Route,{path:"/ticket/:id",component:te}),Object(j.jsx)(r.Route,{path:"/scan",component:oe}),Object(j.jsx)(Z,{path:"/my-tickets",component:ne}),Object(j.jsx)(Z,{path:"/my-events",component:re}),Object(j.jsx)(Z,{path:"/test",component:F})]})}),Object(j.jsx)(x,{})]})},de=function(e){var t=e.children,c=Object(r.useHistory)();return Object(j.jsx)(i.a,{domain:"dev-430di7gc.us.auth0.com",clientId:"ASQST4DWxKpHwYasXlQre32qdVvJUAZY",redirectUri:window.location.origin,onRedirectCallback:function(e){c.push((null===e||void 0===e?void 0:e.returnTo)||window.location.pathname)},audience:"https://open.ticket",children:t})};c(85),c(86);a.a.render(Object(j.jsx)(O.a,{children:Object(j.jsx)(de,{children:Object(j.jsx)(be,{})})}),document.getElementById("root"))}},[[87,1,2]]]);
//# sourceMappingURL=main.27007ba6.chunk.js.map